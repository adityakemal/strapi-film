"use strict";(self.webpackChunkstapi_film_cms=self.webpackChunkstapi_film_cms||[]).push([[8503],{73972:(A,c,t)=>{t.d(c,{f:()=>f});var e=t(67294),a=t(57993),_=t(88767),m=t(52809),p=t(35326);const f=()=>{const i=(0,a.lm)(),{del:h,post:M,put:D,get:x}=(0,a.kY)(),{formatAPIError:O}=(0,a.So)(),{isLoading:s,isError:n,data:r,refetch:d,error:o}=(0,_.useQuery)(["get-documentation",m.Z],async()=>{const{data:E}=await x(`/${m.Z}/getInfos`);return E});(0,e.useEffect)(()=>{n&&o&&i({type:"warning",message:o?O(o):{id:"notification.error"}})},[n,o,i,O]);const l=E=>{i({type:"warning",message:O(E)})},P=(E,g,T)=>{d(),i({type:E,message:{id:(0,p.Z)(g),defaultMessage:T}})},L=(0,_.useMutation)(({prefix:E,version:g})=>h(`${E}/deleteDoc/${g}`),{onSuccess:()=>P("info","notification.delete.success","Successfully deleted documentation"),onError:l}),v=(0,_.useMutation)(({prefix:E,body:g})=>D(`${E}/updateSettings`,g),{onSuccess:()=>P("success","notification.update.success","Successfully updated settings"),onError:l}),R=(0,_.useMutation)(({prefix:E,version:g})=>M(`${E}/regenerateDoc`,{version:g}),{onSuccess:()=>P("info","notification.generate.success","Successfully generated documentation"),onError:l});return{data:r,isLoading:s,isError:n,remove:L,submit:v,regenerate:R}}},50233:(A,c,t)=>{t.r(c),t.d(c,{default:()=>Z});var e=t(67294),a=t(185),_=t(53979),m=t(29728),p=t(49066),f=t(41580),i=t(11047),h=t(75515),M=t(11276),D=t(67819),x=t(93127),O=t(16364),s=t(25752),n=t(57993),r=t(85018),d=t(8934),o=t(94123),l=t(41054),P=t(86896),L=t(88972),v=t(87561),R=t(12966),E=t(73972),g=t(10104);const T=v.Ry().shape({restrictedAccess:v.O7(),password:v.Z_().when("restrictedAccess",(u,C)=>u?C.required(n.I0.required):C)}),j=()=>{(0,n.go)();const{formatMessage:u}=(0,P.Z)(),{submit:C,data:W,isLoading:w}=(0,E.f)(),[I,$]=(0,e.useState)(!1),{allowedActions:b}=(0,n.ss)(R._),z=y=>{C.mutate({prefix:W?.prefix,body:y})};return e.createElement(a.o,null,w?e.createElement(n.dO,null,"Plugin settings are loading"):e.createElement(l.J9,{initialValues:{restrictedAccess:W?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:z,validationSchema:T},({handleSubmit:y,values:B,handleChange:F,errors:U,setFieldTouched:H,setFieldValue:K,dirty:N})=>e.createElement(n.l0,{noValidate:!0,onSubmit:y},e.createElement(_.T,{title:u({id:(0,g.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:u({id:(0,g.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(m.z,{type:"submit",startIcon:e.createElement(r.Z,null),disabled:!N&&b.canUpdate},u({id:(0,g.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"}))}),e.createElement(p.D,null,e.createElement(f.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(i.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(h.Z,{variant:"delta",as:"h2"},u({id:"global.settings",defaultMessage:"Settings"})),e.createElement(M.r,{gap:4},e.createElement(D.P,{col:6,s:12},e.createElement(x.s,{name:"restrictedAccess",label:u({id:(0,g.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:u({id:(0,g.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:B.restrictedAccess,onChange:()=>{B.restrictedAccess===!0&&(K("password","",!1),H("password",!1,!1)),K("restrictedAccess",!B.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),B.restrictedAccess&&e.createElement(D.P,{col:6,s:12},e.createElement(O.o,{label:u({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:I?"text":"password",value:B.password,onChange:F,error:U.password?u({id:U.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(S,{onClick:X=>{X.stopPropagation(),$(J=>!J)},label:u(I?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},I?e.createElement(d.Z,null):e.createElement(o.Z,null))})))))))))},S=(0,L.ZP)(s.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:u})=>u.colors.neutral600};
    }
  }
`,Z=j},35326:(A,c,t)=>{t.d(c,{Z:()=>_});var e=t(52809);const _=m=>`${e.Z}.${m}`},10104:(A,c,t)=>{t.d(c,{O:()=>e.Z});var e=t(35326)},49066:(A,c,t)=>{t.d(c,{D:()=>_});var e=t(85893),a=t(41580);const _=({children:m})=>(0,e.jsx)(a.x,{paddingLeft:10,paddingRight:10,children:m})},53979:(A,c,t)=>{t.d(c,{T:()=>D});var e=t(85893),a=t(67294),_=t(88972);const m=s=>{const n=(0,a.useRef)(null),[r,d]=(0,a.useState)(!0),o=([l])=>{d(l.isIntersecting)};return(0,a.useEffect)(()=>{const l=n.current,P=new IntersectionObserver(o,s);return l&&P.observe(n.current),()=>{l&&P.disconnect()}},[n,s]),[n,r]};var p=t(79698);const f=(s,n)=>{const r=(0,p.W)(n);(0,a.useLayoutEffect)(()=>{const d=new ResizeObserver(r);return Array.isArray(s)?s.forEach(o=>{o.current&&d.observe(o.current)}):s.current&&d.observe(s.current),()=>{d.disconnect()}},[s,r])};var i=t(41580),h=t(11047),M=t(75515);const D=s=>{const n=(0,a.useRef)(null),[r,d]=(0,a.useState)(null),[o,l]=m({root:null,rootMargin:"0px",threshold:0});return f(o,()=>{o.current&&d(o.current.getBoundingClientRect())}),(0,a.useEffect)(()=>{n.current&&d(n.current.getBoundingClientRect())},[n]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:r?.height},ref:o,children:l&&(0,e.jsx)(O,{ref:n,...s})}),!l&&(0,e.jsx)(O,{...s,sticky:!0,width:r?.width})]})};D.displayName="HeaderLayout";const x=(0,_.ZP)(i.x)`
  width: ${({width:s})=>s?`${s/16}rem`:void 0};
  z-index: ${({theme:s})=>s.zIndices[1]};
`,O=a.forwardRef(({navigationAction:s,primaryAction:n,secondaryAction:r,subtitle:d,title:o,sticky:l,width:P,...L},v)=>{const R=typeof d=="string";return l?(0,e.jsx)(x,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:P,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(h.k,{justifyContent:"space-between",children:[(0,e.jsxs)(h.k,{children:[s&&(0,e.jsx)(i.x,{paddingRight:3,children:s}),(0,e.jsxs)(i.x,{children:[(0,e.jsx)(M.Z,{variant:"beta",as:"h1",...L,children:o}),R?(0,e.jsx)(M.Z,{variant:"pi",textColor:"neutral600",children:d}):d]}),r?(0,e.jsx)(i.x,{paddingLeft:4,children:r}):null]}),(0,e.jsx)(h.k,{children:n?(0,e.jsx)(i.x,{paddingLeft:2,children:n}):void 0})]})}):(0,e.jsxs)(i.x,{ref:v,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:s?6:8,background:"neutral100","data-strapi-header":!0,children:[s?(0,e.jsx)(i.x,{paddingBottom:2,children:s}):null,(0,e.jsxs)(h.k,{justifyContent:"space-between",children:[(0,e.jsxs)(h.k,{minWidth:0,children:[(0,e.jsx)(M.Z,{as:"h1",variant:"alpha",...L,children:o}),r?(0,e.jsx)(i.x,{paddingLeft:4,children:r}):null]}),n]}),R?(0,e.jsx)(M.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:d}):d]})})},185:(A,c,t)=>{t.d(c,{o:()=>p});var e=t(85893),a=t(88972),_=t(41580);const m=(0,a.ZP)(_.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,p=({labelledBy:f="main-content-title",...i})=>(0,e.jsx)(m,{"aria-labelledby":f,as:"main",id:"main-content",tabIndex:-1,...i})}}]);
